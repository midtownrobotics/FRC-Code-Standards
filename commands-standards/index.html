<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Command Standards - My Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Command Standards";
        var mkdocs_page_input_path = "commands-standards.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/java.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> My Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">FRC 1648 Code Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../global-standards/">Global Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../filesystem-standards/">Filesystem Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../constants-standards/">Constants Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../logging-standards/">Logging Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../advantagekit-standards/">Advantagekit Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../subsystem-standards/">Subsystem Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../control-loop-standards/">Control Loop Standards</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../robotstate-standards/">RobotState Standards</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">My Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Command Standards</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="command-standards">Command Standards</h1>
<p>This section provides standards that govern the Commands and autonomous routines in robot projects.</p>
<h2 id="subsystem-commands">Subsystem Commands</h2>
<p>In order for a subsystem to be useful, they must be told to do something, this is what commands are for. Subsystems tell the actuators how to do something (ex. run at a voltage, follow a motion profile, account for feedback, etc.) while commands tell the robot to actually execute the tasks.</p>
<p>Simple commands that only require one subsystem are located in that subsystem.</p>
<!-- ex. (Shooter command to run flywheels at set velocity on FRC 190 2024 robot, Snapback) -->

<pre><code class="language-java">public Command runVelocity() {
    return runEnd(
        () -&gt; {
          setSpinVelocity(ShooterConstants.DEFAULT_SPEED.get());
        },
        () -&gt; {
          stop();
        });
  }
</code></pre>
<p>These commands can be used in other places in the robot code by referencing the subsystem.</p>
<p>ex.</p>
<pre><code class="language-java">shooter.runVelocity();
</code></pre>
<h2 id="subsystem-command-exceptions">Subsystem Command Exceptions</h2>
<p>In long and complicated subsystems that have a lot of logic, it can be useful to separate commands into a different class to improve code readibility.</p>
<!-- ex. ([DriveCommands.java](https://github.com/Team-190/2k24-Robot-Code/blob/main/src/main/java/frc/robot/commands/DriveCommands.java) from FRC 190 2024 robot, Snapback) -->

<h2 id="composite-commands">Composite Commands</h2>
<p>Composite commands are commands that are made up of more than one pre-defined command. They always take the form of a static factory. In general, composite commands should never be their own classes. <a href="https://github.com/wpilibsuite/allwpilib">WPIlib</a> has excellent documentation on <a href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-compositions.html">Command Composition</a> as well as <a href="https://docs.wpilib.org/en/2020/docs/software/commandbased/convenience-features.html">Command Decorators</a> which are much more intuitive and concise.</p>
<p>It is generally best to write commands as compositions rather than string commands together with decorators.</p>
<p>ex.</p>
<pre><code class="language-java">public static final Command getCollectCommand(Intake intake, Serializer serializer) {
    return Commands.sequence(
        intake.deployIntake(),
        Commands.race(intake.runVoltage(), serializer.intake()),
        intake.retractIntake());
}
</code></pre>
<p>instead of </p>
<pre><code class="language-java">public static final Command getCollectCommand(Intake intake, Serializer serializer) {
    return
        intake.deployIntake()
        .andThen(Commands.race(intake.runVoltage(), serializer.intake()))
        .andThen(intake.retractIntake());
}
</code></pre>
<p>Composite commands reside in their own class called <code>CompositeCommands.java</code>.</p>
<!-- ex. ([```CompositeCommands.java```](https://github.com/Team-190/2k24-Robot-Code/blob/main/src/main/java/frc/robot/commands/CompositeCommands.java) from FRC 190 2024 robot, Snapback) -->

<h2 id="button-bindings-and-triggers">Button Bindings and Triggers</h2>
<p>Commands tell the robot to execute tasks, but in order for the robot code to schedule the command for execution, it needs to be bound to a <a href="https://docs.wpilib.org/en/stable/docs/software/commandbased/binding-commands-to-triggers.html">Trigger</a>. Triggers tell the robot which conditions need to be met to execute commands. Triggers are always instantiated in the <code>configureButtonBindings()</code> method of <code>RobotContainer.java</code>.</p>
<!-- ex. (Shoot button binding on FRC 190 2024 robot, Snapback) -->

<pre><code class="language-java">driver
        .rightBumper()
        .and(() -&gt; RobotState.shooterReady(hood, shooter))
        .whileTrue(
            Commands.waitSeconds(0.25)
                .andThen(CompositeCommands.getShootCommand(intake, serializer, kicker)));
</code></pre>
<p>in this case, <code>rightBumper()</code> is the trigger representing the right bumper button on the driver's Xbox 360 controller. The <code>.and()</code> call adds another condition to the trigger. The <code>.whileTrue()</code> call means that the robot trigger will only run the command while the conditions of the trigger are met. This trigger made the robot only able to shoot when the driver pressed the right bumper and when the robot code reported the shooter was ready to fire.</p>
<p>It is worth noting that Triggers can be arbitrary by creating a new Trigger object and binding it to an event, which can then be passed into a command as a parameter.</p>
<p>ex.</p>
<pre><code class="language-java">Trigger arbitraryTrigger = new Trigger(limitSwitch::get)
</code></pre>
<p>However, this usually isn't necessary because required subsystems get passed into composite commands, meaning there usually isn't a reason to bind command to a trigger unless it's being bound to a button.</p>
<p>Arbitrary Triggers are most useful when a condition must be met across a wide number of commands.</p>
<!-- ex. (Shoot button binding with arbitrary trigger on FRC 190 2024 robot, Snapback) -->

<pre><code class="language-java">Trigger shooterReady = new Trigger(() -&gt; RobotState.shooterReady(hood, shooter))

driver
        .rightBumper()
        .and(shooterReady)
        .whileTrue(
            Commands.waitSeconds(0.25)
                .andThen(CompositeCommands.getShootCommand(intake, serializer, kicker)));
</code></pre>
<h2 id="autonomous-routines">Autonomous Routines</h2>
<p>Autonomous routines are simply composite command that are called during autonomous. Autonomous paths are loaded into the roborio when the code is deployed, and called during the autonomous period. We can follow a path using its path on the roborio.</p>
<pre><code class="language-java">public static final Command centerTwoPiece(
      Drive drive, Intake intake, Serializer serializer, Kicker kicker, TrackingMode targetType) {
    return Commands.sequence(
        AutoBuilder.followPath(PathPlannerPath.fromPathFile(&quot;deploy/paths/Center to Center Wing Note&quot;)),
        CompositeCommands.getAimSpeakerCommand(drive),
        CompositeCommands.getShootCommand(intake, serializer, kicker),
        CompositeCommands.getTrackNoteSpikeCommand(
            drive, intake, serializer, AutoPathPoints.NOTE_2, targetType),
        CompositeCommands.getAimSpeakerCommand(drive),
        CompositeCommands.getShootCommand(intake, serializer, kicker));
      }
</code></pre>
<p>Ankit notes:
- Separate out factories 254 style.
- Do we use PathPlanner autos or make the commands in code? PathPlanner autos are visually nicer but can't take arguments</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
